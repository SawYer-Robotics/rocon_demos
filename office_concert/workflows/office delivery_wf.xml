<xml xmlns="http://www.w3.org/1999/xhtml"><block type="action_speak" id="532" inline="false" x="-9" y="-87"><value name="VALUE"><block type="text" id="533"><field name="TEXT">Start!!</field></block></value><next><block type="variables_set" id="534" inline="true"><field name="VAR">order_queue</field><value name="VALUE"><block type="lists_create_empty" id="535"></block></value></block></next></block><block type="variables_set" id="536" inline="true" x="11" y="-5"><field name="VAR">robot_list</field><value name="VALUE"><block type="lists_create_empty" id="537"></block></value><next><block type="lists_setIndex" id="538" inline="true"><mutation at="false"></mutation><field name="MODE">INSERT</field><field name="WHERE">LAST</field><value name="LIST"><block type="variables_get" id="539"><field name="VAR">robot_list</field></block></value><value name="TO"><block type="object_create_with" id="540" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="object_item" id="541" inline="true"><field name="KEY">name</field><value name="VALUE"><block type="text" id="542"><field name="TEXT">adams</field></block></value></block></value><value name="ADD1"><block type="object_item" id="543" inline="true"><field name="KEY">order_id</field><value name="VALUE"><block type="text" id="544"><field name="TEXT"> </field></block></value></block></value><value name="ADD2"><block type="object_item" id="545" inline="true"><field name="KEY">status</field><value name="VALUE"><block type="math_number" id="546"><field name="NUM">10</field></block></value></block></value></block></value><next><block type="lists_setIndex" id="547" inline="true"><mutation at="false"></mutation><field name="MODE">INSERT</field><field name="WHERE">LAST</field><value name="LIST"><block type="variables_get" id="548"><field name="VAR">robot_list</field></block></value><value name="TO"><block type="object_create_with" id="549" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="object_item" id="550" inline="true"><field name="KEY">name</field><value name="VALUE"><block type="text" id="551"><field name="TEXT">zach</field></block></value></block></value><value name="ADD1"><block type="object_item" id="552" inline="true"><field name="KEY">order_id</field><value name="VALUE"><block type="text" id="553"><field name="TEXT"></field></block></value></block></value><value name="ADD2"><block type="object_item" id="554" inline="true"><field name="KEY">status</field><value name="VALUE"><block type="math_number" id="555"><field name="NUM">10</field></block></value></block></value></block></value></block></next></block></next></block><block type="ros_subscribe" id="556" inline="true" x="-19" y="283"><field name="DO_PARAM">item</field><value name="NAME"><block type="text" id="557"><field name="TEXT">/send_order</field></block></value><value name="TYPE"><block type="text" id="558"><field name="TEXT">simple_delivery_msgs/DeliveryOrder</field></block></value><statement name="DO"><block type="lists_setIndex" id="559" inline="true"><mutation at="false"></mutation><field name="MODE">INSERT</field><field name="WHERE">LAST</field><value name="LIST"><block type="variables_get" id="560"><field name="VAR">order_queue</field></block></value><value name="TO"><block type="variables_get" id="561"><field name="VAR">item</field></block></value><next><block type="action_speak" id="562" inline="false"><value name="VALUE"><block type="text_join" id="563" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="text" id="564"><field name="TEXT">Get Order: [Num: </field></block></value><value name="ADD1"><block type="lists_length" id="565" inline="false"><value name="VALUE"><block type="variables_get" id="566"><field name="VAR">order_queue</field></block></value></block></value><value name="ADD2"><block type="text" id="567"><field name="TEXT">]</field></block></value></block></value></block></next></block></statement></block><block type="defer" id="568" x="-19" y="503"><statement name="DO"><block type="controls_whileUntil" id="569" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_boolean" id="570"><field name="BOOL">TRUE</field></block></value><statement name="DO"><block type="controls_forEach" id="571" inline="false"><field name="VAR">robot</field><value name="LIST"><block type="variables_get" id="572"><field name="VAR">robot_list</field></block></value><statement name="DO"><block type="controls_if" id="573" inline="false"><value name="IF0"><block type="logic_negate" id="574" inline="false"><value name="BOOL"><block type="lists_isEmpty" id="575" inline="true"><value name="VALUE"><block type="variables_get" id="576"><field name="VAR">order_queue</field></block></value></block></value></block></value><statement name="DO0"><block type="controls_if" id="577" inline="false"><value name="IF0"><block type="logic_compare" id="578" inline="true"><field name="OP">EQ</field><value name="A"><block type="object_item_get" id="579"><field name="VAR">robot</field><field name="KEY">status</field></block></value><value name="B"><block type="math_number" id="580"><field name="NUM">10</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="581" inline="true"><field name="VAR">order</field><value name="VALUE"><block type="lists_getIndex" id="582" inline="true"><mutation statement="false" at="false"></mutation><field name="MODE">GET_REMOVE</field><field name="WHERE">FIRST</field><value name="VALUE"><block type="variables_get" id="583"><field name="VAR">order_queue</field></block></value></block></value><next><block type="action_speak" id="584" inline="false"><value name="VALUE"><block type="text_join" id="585" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="text" id="586"><field name="TEXT">Pop Order: [Num: </field></block></value><value name="ADD1"><block type="lists_length" id="587" inline="false"><value name="VALUE"><block type="variables_get" id="588"><field name="VAR">order_queue</field></block></value></block></value><value name="ADD2"><block type="text" id="589"><field name="TEXT">]</field></block></value></block></value><next><block type="object_item_set" id="590" inline="true"><field name="VAR">robot</field><field name="KEY">status</field><value name="VALUE"><block type="math_number" id="591"><field name="NUM">20</field></block></value><next><block type="object_item_set" id="592" inline="true"><field name="VAR">robot</field><field name="KEY">order_id</field><value name="VALUE"><block type="object_item_get" id="593"><field name="VAR">order</field><field name="KEY">order_id</field></block></value><next><block type="action_speak" id="594" inline="false"><value name="VALUE"><block type="text" id="595"><field name="TEXT">set new robot</field></block></value><next><block type="variables_set" id="596" inline="true"><field name="VAR">locations</field><value name="VALUE"><block type="lists_create_empty" id="597"></block></value><next><block type="controls_forEach" id="598" inline="false"><field name="VAR">loc</field><value name="LIST"><block type="object_item_get" id="599"><field name="VAR">order</field><field name="KEY">receivers</field></block></value><statement name="DO"><block type="lists_setIndex" id="600" inline="true"><mutation at="false"></mutation><field name="MODE">INSERT</field><field name="WHERE">LAST</field><value name="LIST"><block type="variables_get" id="601"><field name="VAR">locations</field></block></value><value name="TO"><block type="object_item_get" id="602"><field name="VAR">loc</field><field name="KEY">location</field></block></value></block></statement><next><block type="action_speak" id="603" inline="false"><value name="VALUE"><block type="object_item_get" id="604"><field name="VAR">order</field><field name="KEY">order_id</field></block></value><next><block type="action_speak" id="605" inline="false"><value name="VALUE"><block type="variables_get" id="606"><field name="VAR">locations</field></block></value><next><block type="action_speak" id="607" inline="false"><value name="VALUE"><block type="text_join" id="608" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="text" id="609"><field name="TEXT">/</field></block></value><value name="ADD1"><block type="object_item_get" id="610"><field name="VAR">robot</field><field name="KEY">name</field></block></value><value name="ADD2"><block type="text" id="611"><field name="TEXT">/delivery_order</field></block></value></block></value><next><block type="action_speak" id="612" inline="false"><value name="VALUE"><block type="object_create_with" id="613" inline="false"><mutation items="2"></mutation><value name="ADD0"><block type="object_item" id="614" inline="true"><field name="KEY">order_id</field><value name="VALUE"><block type="object_item_get" id="615"><field name="VAR">order</field><field name="KEY">order_id</field></block></value></block></value><value name="ADD1"><block type="object_item" id="616" inline="true"><field name="KEY">locations</field><value name="VALUE"><block type="variables_get" id="617"><field name="VAR">locations</field></block></value></block></value></block></value><next><block type="ros_action" id="618" inline="true"><field name="ON_RESULT_PARAM">item</field><field name="ON_FEEDBACK_PARAM">item</field><value name="NAME"><block type="text_join" id="619" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="text" id="620"><field name="TEXT">/</field></block></value><value name="ADD1"><block type="object_item_get" id="621"><field name="VAR">robot</field><field name="KEY">name</field></block></value><value name="ADD2"><block type="text" id="622"><field name="TEXT">/delivery_order</field></block></value></block></value><value name="TYPE"><block type="text" id="623"><field name="TEXT">simple_delivery_msgs/RobotDeliveryOrderAction</field></block></value><value name="GOAL"><block type="object_create_with" id="624" inline="false"><mutation items="2"></mutation><value name="ADD0"><block type="object_item" id="625" inline="true"><field name="KEY">order_id</field><value name="VALUE"><block type="object_item_get" id="626"><field name="VAR">order</field><field name="KEY">order_id</field></block></value></block></value><value name="ADD1"><block type="object_item" id="627" inline="true"><field name="KEY">locations</field><value name="VALUE"><block type="variables_get" id="628"><field name="VAR">locations</field></block></value></block></value></block></value><statement name="ON_RESULT"><block type="action_speak" id="629" inline="false"><value name="VALUE"><block type="text" id="630"><field name="TEXT">Delivery Result</field></block></value><next><block type="action_speak" id="631" inline="false"><value name="VALUE"><block type="variables_get" id="632"><field name="VAR">item</field></block></value><next><block type="controls_forEach" id="633" inline="false"><field name="VAR">robot</field><value name="LIST"><block type="variables_get" id="634"><field name="VAR">robot_list</field></block></value><statement name="DO"><block type="controls_if" id="635" inline="false"><value name="IF0"><block type="logic_compare" id="636" inline="true"><field name="OP">EQ</field><value name="A"><block type="object_item_get" id="637"><field name="VAR">robot</field><field name="KEY">order_id</field></block></value><value name="B"><block type="object_item_get" id="638"><field name="VAR">item</field><field name="KEY">order_id</field></block></value></block></value><statement name="DO0"><block type="action_speak" id="639" inline="false"><value name="VALUE"><block type="text_join" id="640" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="text" id="641"><field name="TEXT">Set idle robot: </field></block></value><value name="ADD1"><block type="object_item_get" id="642"><field name="VAR">robot</field><field name="KEY">name</field></block></value></block></value><next><block type="object_item_set" id="643" inline="true"><field name="VAR">robot</field><field name="KEY">status</field><value name="VALUE"><block type="math_number" id="644"><field name="NUM">10</field></block></value><next><block type="object_item_set" id="645" inline="true"><field name="VAR">robot</field><field name="KEY">order_id</field><value name="VALUE"><block type="text" id="646"><field name="TEXT"></field></block></value><next><block type="controls_flow_statements" id="647"><field name="FLOW">BREAK</field></block></next></block></next></block></next></block></statement></block></statement></block></next></block></next></block></statement><statement name="ON_FEEDBACK"><block type="action_speak" id="648" inline="false"><value name="VALUE"><block type="text" id="649"><field name="TEXT">Receive Delivery Status</field></block></value><next><block type="action_speak" id="650" inline="false"><value name="VALUE"><block type="variables_get" id="651"><field name="VAR">item</field></block></value><next><block type="ros_publish" id="652" inline="true"><value name="NAME"><block type="text" id="653"><field name="TEXT">/delivery_status</field></block></value><value name="TYPE"><block type="text" id="654"><field name="TEXT">simple_delivery_msgs/DeliveryStatus</field></block></value><value name="VALUE"><block type="object_item_get" id="655"><field name="VAR">item</field><field name="KEY">delivery_status</field></block></value></block></next></block></next></block></statement><next><block type="action_speak" id="656" inline="false"><value name="VALUE"><block type="text" id="657"><field name="TEXT">Send Action</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block></statement><next><block type="action_sleep" id="658" inline="false"><value name="VALUE"><block type="math_number" id="659"><field name="NUM">10</field></block></value></block></next></block></statement></block></statement></block></xml>