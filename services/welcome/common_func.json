{"id":1418880899058,"js":"var hue_res;\nvar res;\nvar id;\nvar color;\nvar light_ids;\nvar video_name;\nvar light_id;\n\nfunction set_hue_color(res, id, color) {\n  $engine.scheduledPublish(res, \"set_hue\", \"rocon_device_msgs/Hue\", ({\"light_id\":id,\"type\":'',\"name\":'',\"modelid\":'',\"swvesion\":'',\"state\":({\"on\":false,\"hue\":0,\"sat\":0,\"bri\":0,\"reachable\":false,\"color\":color})}));}\n\nfunction UDF_set_light(light_ids, color) {\n  setTimeout(function(){ Fiber(function(){  for (var light_id_index in  light_ids) {\n      light_id = light_ids[light_id_index];\n      set_hue_color(hue_res, light_id, color);\n      $engine.sleep(500);}\n  }).run(); }, 0);}\n\nfunction UDF_show_video(video_name) {\n}\n\n\nhue_res = ($engine.allocateResource(\"rocon_hue/hue_bridge\", \"rocon:/pc/hue_bridge#rocon_hue/hue_bridge\", [{\"remap_from\":\"set_hue\",\"remap_to\":\"/set_hue\"},{\"remap_from\":\"list_hue\",\"remap_to\":\"/list_hue\"}], [])) ;\n","xml":"<xml xmlns=\"http://www.w3.org/1999/xhtml\"><block type=\"variables_set\" id=\"654\" inline=\"true\" x=\"409\" y=\"-255\"><field name=\"VAR\">hue_res</field><value name=\"VALUE\"><block type=\"ros_requester_allocate\" id=\"655\"><mutation extra_config=\"{&quot;rapp&quot;:&quot;rocon_hue/hue_bridge&quot;,&quot;uri&quot;:&quot;rocon:/pc/hue_bridge#rocon_hue/hue_bridge&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;set_hue&quot;,&quot;remap_to&quot;:&quot;/set_hue&quot;},{&quot;remap_from&quot;:&quot;list_hue&quot;,&quot;remap_to&quot;:&quot;/list_hue&quot;}],&quot;parameters&quot;:[]}\"></mutation></block></value></block><block type=\"procedures_defnoreturn\" id=\"656\" x=\"411\" y=\"-185\"><mutation><arg name=\"res\"></arg><arg name=\"id\"></arg><arg name=\"color\"></arg></mutation><field name=\"NAME\">set_hue_color</field><statement name=\"STACK\"><block type=\"ros_scheduled_publish_set_hue\" id=\"657\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"658\"><field name=\"VAR\">res</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_rocon_device_msgs-Hue\" id=\"659\" inline=\"false\"><mutation></mutation><value name=\"LIGHT_ID\"><block type=\"variables_get\" id=\"660\"><field name=\"VAR\">id</field></block></value><value name=\"TYPE\"><block type=\"text\" id=\"661\"><field name=\"TEXT\"></field></block></value><value name=\"NAME\"><block type=\"text\" id=\"662\"><field name=\"TEXT\"></field></block></value><value name=\"MODELID\"><block type=\"text\" id=\"663\"><field name=\"TEXT\"></field></block></value><value name=\"SWVESION\"><block type=\"text\" id=\"664\"><field name=\"TEXT\"></field></block></value><value name=\"STATE\"><block type=\"ros_msg_rocon_device_msgs-HueState\" id=\"665\" inline=\"false\"><mutation></mutation><value name=\"ON\"><block type=\"logic_boolean\" id=\"666\"><field name=\"BOOL\">FALSE</field></block></value><value name=\"HUE\"><block type=\"math_number\" id=\"667\"><field name=\"NUM\">0</field></block></value><value name=\"SAT\"><block type=\"math_number\" id=\"668\"><field name=\"NUM\">0</field></block></value><value name=\"BRI\"><block type=\"math_number\" id=\"669\"><field name=\"NUM\">0</field></block></value><value name=\"REACHABLE\"><block type=\"logic_boolean\" id=\"670\"><field name=\"BOOL\">FALSE</field></block></value><value name=\"COLOR\"><block type=\"variables_get\" id=\"671\"><field name=\"VAR\">color</field></block></value></block></value></block></value></block></statement></block><block type=\"procedures_defnoreturn\" id=\"672\" x=\"410\" y=\"213\"><mutation><arg name=\"light_ids\"></arg><arg name=\"color\"></arg></mutation><field name=\"NAME\">UDF_set_light</field><statement name=\"STACK\"><block type=\"defer\" id=\"673\"><statement name=\"DO\"><block type=\"controls_forEach\" id=\"674\" inline=\"false\"><field name=\"VAR\">light_id</field><value name=\"LIST\"><block type=\"variables_get\" id=\"675\"><field name=\"VAR\">light_ids</field></block></value><statement name=\"DO\"><block type=\"procedures_callnoreturn\" id=\"676\" inline=\"false\"><mutation name=\"set_hue_color\"><arg name=\"res\"></arg><arg name=\"id\"></arg><arg name=\"color\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"677\"><field name=\"VAR\">hue_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"678\"><field name=\"VAR\">light_id</field></block></value><value name=\"ARG2\"><block type=\"variables_get\" id=\"679\"><field name=\"VAR\">color</field></block></value><next><block type=\"action_sleep\" id=\"680\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"681\"><field name=\"NUM\">500</field></block></value></block></next></block></statement></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"682\" x=\"415\" y=\"473\"><mutation><arg name=\"video_name\"></arg></mutation><field name=\"NAME\">UDF_show_video</field></block></xml>","title":"common_func"}