# Concert client tuples are of the platform-system-robot-name-app where
# the name is just a placemarker for the eventual concert client name.
# All other parts of the tuple are fixed.

name: "Cafe Concert"
nodes:
  - id: waiter_boy
    tuple: linux.ros.pc.waiterbot/waiter_soft
  - id: waiter_boy1
    tuple: linux.ros.pc.waiterbot/waiter_soft
  - id: waiter_boy2
    tuple: linux.ros.pc.waiterbot/waiter_soft
  - id: cafe_database
    tuple: linux.ros.pc.cafe_database/cafe_database
topics:
  - id: cafe_database_map
    type: nav_msgs/OccupancyGrid
  - id: cafe_database_map_metadata
    type: nav_msgs/MapMetaData

  - id: waiterbot_pose
    type: geometry_msgs/PoseStamped
  - id: waiterbot_map
    type: nav_msgs/OccupancyGrid
  - id: waiterbot_map_metadata
    type: nav_msgs/MapMetaData
  - id: waiterbot_simple_goal
    type: geometry_msgs/PoseStamped
  - id: waiterbot_initialpose
    type: geometry_msgs/PoseStamped

  - id: waiterbot1_pose
    type: geometry_msgs/PoseStamped
  - id: waiterbot1_map
    type: nav_msgs/OccupancyGrid
  - id: waiterbot1_map_metadata
    type: nav_msgs/MapMetaData
  - id: waiterbot1_simple_goal
    type: geometry_msgs/PoseStamped
  - id: waiterbot1_initialpose
    type: geometry_msgs/PoseStamped

  - id: waiterbot2_pose
    type: geometry_msgs/PoseStamped
  - id: waiterbot2_map
    type: nav_msgs/OccupancyGrid
  - id: waiterbot2_map_metadata
    type: nav_msgs/MapMetaData
  - id: waiterbot2_simple_goal
    type: geometry_msgs/PoseStamped
  - id: waiterbot2_initialpose
    type: geometry_msgs/PoseStamped

actions:
  - id: waiterbot_movebase
    type: move_base_msgs/MoveBase
  - id: waiterbot1_movebase
    type: move_base_msgs/MoveBase
  - id: waiterbot2_movebase
    type: move_base_msgs/MoveBase

edges:

## Cafe database
  - start: cafe_database
    finish: cafe_database_map 
    remap_from: map
    remap_to: map
  - start: cafe_database
    finish: cafe_database_map_metadata
    remap_from: map_metadata
    remap_to: map_metadata

## Waiter
  - start: waiter_boy
    finish: waiterbot_pose
    remap_from: robot_pose
    remap_to: waiter_boy/robot_pose
  - start: waiter_boy
    finish: waiterbot_map
    remap_from: map
    remap_to: map
  - start: waiter_boy
    finish: waiterbot_movebase
    remap_from: move_base
    remap_to: waiter_boy/move_base
  - start: waiter_boy
    finish: waiterbot_simple_goal
    remap_from: move_base_simple/goal
    remap_to: waiter_boy/goal_simple
  - start: waiter_boy
    finish: waiterbot_initialpose
    remap_from: initialpose
    remap_to: waiter_boy/initialpose

## Waiter1
  - start: waiter_boy1
    finish: waiterbot1_pose
    remap_from: robot_pose
    remap_to: waiter_boy1/robot_pose
  - start: waiter_boy1
    finish: waiterbot1_map
    remap_from: map
    remap_to: map
  - start: waiter_boy1
    finish: waiterbot1_movebase
    remap_from: move_base
    remap_to: waiter_boy1/move_base
  - start: waiter_boy1
    finish: waiterbot_simple_goal
    remap_from: move_base_simple/goal
    remap_to: waiter_boy1/goal_simple
  - start: waiter_boy1
    finish: waiterbot1_initialpose
    remap_from: initialpose
    remap_to: waiter_boy1/initialpose

## Waiter2
  - start: waiter_boy2
    finish: waiterbot2_pose
    remap_from: robot_pose
    remap_to: waiter_boy2/robot_pose
  - start: waiter_boy2
    finish: waiterbot2_map
    remap_from: map
    remap_to: map
  - start: waiter_boy2
    finish: waiterbot2_movebase
    remap_from: move_base
    remap_to: waiter_boy2/move_base
  - start: waiter_boy2
    finish: waiterbot_simple_goal
    remap_from: move_base_simple/goal
    remap_to: waiter_boy2/goal_simple
  - start: waiter_boy2
    finish: waiterbot2_initialpose
    remap_from: initialpose
    remap_to: waiter_boy2/initialpose
